<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IsisDlm: CubeIoPolicy.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>CubeIoPolicy.h</h1><a href="CubeIoPolicy_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00002 <span class="comment">//_Title CubeIoPolicy.h Definition of basic ISIS support structure</span>
00003 <span class="comment">//</span>
00004 <span class="comment">//_Descr ISIS3 file/functionality definition.</span>
00005 <span class="comment">//</span>
00006 <span class="comment">//_Hist Jul 24 2004 Kris Becker, USGS</span>
00007 <span class="comment">//_Version: $Id: CubeIoPolicy.h,v 1.2 2004/11/02 15:38:53 kbecker Exp $</span>
00008 <span class="comment">//_End</span>
00010 <span class="comment"></span><span class="preprocessor">#if !defined(CubeIoPolicy_h)</span>
<a name="l00011"></a><a class="code" href="CubeIoPolicy_8h.html#a0">00011</a> <span class="preprocessor"></span><span class="preprocessor">#define CubeIoPolicy_h</span>
00012 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string&gt;</span>
00013 <span class="preprocessor">#include "Idl.h"</span>
00014 <span class="preprocessor">#include "IdlVariable.h"</span>
00015 
00016 <span class="preprocessor">#include "Cube.h"</span>
00017 <span class="preprocessor">#include "Pvl.h"</span>
00018 <span class="preprocessor">#include "<a class="code" href="IsisBrick_8h.html">IsisBrick.h</a>"</span>
00019 
00020 <span class="preprocessor">#include "tnt/tnt_array3d.h"</span>
00021 
00022 <span class="keyword">namespace </span>ISISDLM {
00023 
00024 
<a name="l00025"></a><a class="code" href="structISISDLM_1_1RawIO.html">00025</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="structISISDLM_1_1RawIO.html">RawIO</a> {
00026   <span class="keyword">protected</span>:
<a name="l00027"></a><a class="code" href="structISISDLM_1_1RawIO.html#b0">00027</a>   <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1RawIO.html#b0">Extract</a>(<a class="code" href="classIsisBrick.html">IsisBrick</a> &amp;b, <span class="keywordtype">int</span> ns, <span class="keywordtype">int</span> nl, <span class="keywordtype">int</span> nb, TNT::Array3D&lt;T&gt; &amp;data) {
00028     TNT::Array3D&lt;T&gt; temp(ns, nl, nb, static_cast&lt;T *&gt; (b.RawBuffer()));
00029     data.inject(temp);
00030     <span class="keywordflow">return</span>;
00031   }
00032 
<a name="l00033"></a><a class="code" href="structISISDLM_1_1RawIO.html#b1">00033</a>   <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1RawIO.html#b1">Inject</a>(<a class="code" href="classIsisBrick.html">IsisBrick</a> &amp;b, <span class="keywordtype">int</span> ns, <span class="keywordtype">int</span> nl, <span class="keywordtype">int</span> nb, TNT::Array3D&lt;T&gt; &amp;data) {
00034     TNT::Array3D&lt;T&gt; temp(ns, nl, nb, static_cast&lt;T *&gt; (b.RawBuffer()));
00035     temp.inject(data);
00036     <span class="keywordflow">return</span>;
00037   }
00038 };
00039 
<a name="l00040"></a><a class="code" href="structISISDLM_1_1StdIO.html">00040</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">struct </span><a class="code" href="structISISDLM_1_1StdIO.html">StdIO</a> {
00041   <span class="keyword">protected</span>:
<a name="l00042"></a><a class="code" href="structISISDLM_1_1StdIO.html#b0">00042</a>   <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1StdIO.html#b0">Extract</a>(<a class="code" href="classIsisBrick.html">IsisBrick</a> &amp;b, <span class="keywordtype">int</span> ns, <span class="keywordtype">int</span> nl, <span class="keywordtype">int</span> nb, TNT::Array3D&lt;T&gt; &amp;data) {
00043     TNT::Array3D&lt;T&gt; temp(ns, nl, nb, b.DoubleBuffer());
00044     data.inject(temp);
00045     <span class="keywordflow">return</span>;
00046   }
00047 
<a name="l00048"></a><a class="code" href="structISISDLM_1_1StdIO.html#b1">00048</a>   <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1StdIO.html#b1">Inject</a>(<a class="code" href="classIsisBrick.html">IsisBrick</a> &amp;b, <span class="keywordtype">int</span> ns, <span class="keywordtype">int</span> nl, <span class="keywordtype">int</span> nb, TNT::Array3D&lt;T&gt; &amp;data) {
00049     TNT::Array3D&lt;T&gt; temp(ns, nl, nb, b.DoubleBuffer());
00050     temp.inject(data);
00051     <span class="keywordflow">return</span>;
00052   }
00053 };
00054 
00055 
<a name="l00056"></a><a class="code" href="structISISDLM_1_1CubeDims.html">00056</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structISISDLM_1_1CubeDims.html">CubeDims</a> {
00057   <span class="keyword">public</span>:
00058 
<a name="l00059"></a><a class="code" href="structISISDLM_1_1CubeDims.html#a0">00059</a>     <a class="code" href="structISISDLM_1_1CubeDims.html#a0">CubeDims</a>() : <a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a>(1), <a class="code" href="structISISDLM_1_1CubeDims.html#o1">_nsamps</a>(0), <a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a>(1), <a class="code" href="structISISDLM_1_1CubeDims.html#o3">_nlines</a>(0),
00060                  <a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a>(1), <a class="code" href="structISISDLM_1_1CubeDims.html#o5">_nbands</a>(0) { }
00061 
<a name="l00062"></a><a class="code" href="structISISDLM_1_1CubeDims.html#a1">00062</a>     <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1CubeDims.html#a1">setSampleSpecs</a>(<span class="keywordtype">int</span> ssamp, <span class="keywordtype">int</span> ns = 0) { 
00063       <a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a> = ssamp; <a class="code" href="structISISDLM_1_1CubeDims.html#o1">_nsamps</a> = ns;
00064     };
00065 
<a name="l00066"></a><a class="code" href="structISISDLM_1_1CubeDims.html#a2">00066</a>     <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1CubeDims.html#a2">setLineSpecs</a>(<span class="keywordtype">int</span> sline, <span class="keywordtype">int</span> nl = 0) {
00067       <a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a> = sline; <a class="code" href="structISISDLM_1_1CubeDims.html#o3">_nlines</a> = nl;
00068     };
00069 
<a name="l00070"></a><a class="code" href="structISISDLM_1_1CubeDims.html#a3">00070</a>     <span class="keywordtype">void</span> <a class="code" href="structISISDLM_1_1CubeDims.html#a3">setBandSpecs</a>(<span class="keywordtype">int</span> sband, <span class="keywordtype">int</span> nb = 0) {
00071       <a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a> = sband; <a class="code" href="structISISDLM_1_1CubeDims.html#o5">_nbands</a> = nb;
00072     };
00073 
<a name="l00074"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o0">00074</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a>;
<a name="l00075"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o1">00075</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o1">_nsamps</a>;
<a name="l00076"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o2">00076</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a>;
<a name="l00077"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o3">00077</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o3">_nlines</a>;
<a name="l00078"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o4">00078</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a>;
<a name="l00079"></a><a class="code" href="structISISDLM_1_1CubeDims.html#o5">00079</a>     <span class="keywordtype">int</span> <a class="code" href="structISISDLM_1_1CubeDims.html#o5">_nbands</a>;
00080 };
00081 
00086 <span class="keyword">template</span> &lt;
00087  <span class="keyword">class </span>T, <span class="keywordtype">int</span> TYPEID,
00088  <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt; <span class="keyword">class </span>IOPolicy
00089  &gt;
<a name="l00090"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html">00090</a>  <span class="keyword">class </span><a class="code" href="classISISDLM_1_1CubeIoPolicy.html">CubeIoPolicy</a> : <span class="keyword">public</span> IOPolicy&lt;T&gt;, <span class="keyword">public</span> <a class="code" href="structISISDLM_1_1CubeDims.html">CubeDims</a> {
00091    <span class="keyword">public</span>:
<a name="l00092"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#w0">00092</a>      <span class="keyword">typedef</span> T   <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#w0">DataType</a>;
<a name="l00093"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a0">00093</a>      <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a0">CubeIoPolicy</a>() { };
<a name="l00094"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a1">00094</a>      <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a0">CubeIoPolicy</a>(<span class="keyword">const</span> <a class="code" href="structISISDLM_1_1CubeDims.html">CubeDims</a> &amp;d) : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>(d) { }
<a name="l00095"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a2">00095</a>      <span class="keyword">virtual</span> <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a2">~CubeIoPolicy</a>() { };
00096 
<a name="l00097"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a3">00097</a>      <span class="keywordtype">int</span> <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a3">getVarType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (TYPEID); }
00098 
<a name="l00099"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a4">00099</a>      <span class="keywordtype">void</span> <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a4">Read</a>(Isis::Cube &amp;cube, TNT::Array3D&lt;T&gt; &amp;data) {
00100        <span class="keywordtype">int</span> ss,sl,sb;
00101        ss = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a>;
00102        sl = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a>;
00103        sb = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a>;
00104 
00105        <span class="keywordtype">int</span> ns,nl,nb;
00106        ns = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o1">_nsamps</a> &lt;= 0) ? cube.Samples() - ss + 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o1">_nsamps</a>;
00107        nl = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o3">_nlines</a> &lt;= 0) ? cube.Lines()   - sl + 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o3">_nlines</a>;
00108        nb = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o5">_nbands</a> &lt;= 0) ? cube.Bands()   - sb + 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o5">_nbands</a>;
00109 
00110        <a class="code" href="classIsisBrick.html">IsisBrick</a> b(ns,nl,nb,cube.PixelType());
00111        b.<a class="code" href="classIsisBrick.html#a1">SetBasePosition</a>(ss,sl,sb);
00112        cube.Read(b);
00113        Extract(b, ns, nl, nb, data);
00114      };
00115 
<a name="l00116"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a5">00116</a>      <span class="keywordtype">void</span> <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#a5">Write</a>(TNT::Array3D&lt;T&gt; &amp;data, Isis::Cube &amp;cube) {
00117        <span class="keywordtype">int</span> ss,sl,sb;
00118        ss = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o0">_ssamp</a>;
00119        sl = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o2">_sline</a>;
00120        sb = (<a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a> &lt;= 0) ? 1 : <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>.<a class="code" href="structISISDLM_1_1CubeDims.html#o4">_sband</a>;
00121 
00122        <span class="keywordtype">int</span> ns,nl,nb;
00123        ns = data.dim1();
00124        nl = data.dim2();
00125        nb = data.dim3();
00126 
00127        <a class="code" href="classIsisBrick.html">IsisBrick</a> b(ns,nl,nb,cube.PixelType());
00128        b.<a class="code" href="classIsisBrick.html#a1">SetBasePosition</a>(ss,sl,sb);
00129        Inject(b, ns, nl, nb, data);
00130        cube.Write(b);
00131      };
00132 
00133    <span class="keyword">private</span>:
<a name="l00134"></a><a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">00134</a>      <a class="code" href="structISISDLM_1_1CubeDims.html">CubeDims</a> <a class="code" href="classISISDLM_1_1CubeIoPolicy.html#r0">dims</a>;           
00135 
00136 
00137  };
00138 
00139 
00140 
00141  }
00142 <span class="preprocessor"> #endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Aug 3 22:47:22 2005 for IsisDlm by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
