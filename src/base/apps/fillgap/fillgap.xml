<?xml version="1.0"?>
<application name="fillgap" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://isis.astrogeology.usgs.gov/Schemas/Application/application.xsd">
  <brief>
    Compute interpolations to replace null data
  </brief>

  <description>
      This program will interpolate special pixel values in a data set using the user specified
      interpolation scheme and direction.
  </description>

  <category>
    <categoryItem>Math and Statistics</categoryItem>
  </category>

  <history>
    <change name = "Stacy Alley" date="2007-08-08">
        based off slither - first version of fillgap
    </change>
    <change name="Christopher Austin" date="2008-01-30">
      Changed INTERP option CUBIC's name to CUBICCONVOLUTION to correlate with 
      other apps using the INTERP param.
    </change>
    <change name="Jeannie Walldren" date="2008-11-05">
      Removed references to DataInterp class and replaced them  with 
      NumericalApproximation class.
    </change>

  </history>

  <groups>
    <group name="Files">
      <parameter name="FROM">
        <type>cube</type>
        <fileMode>input</fileMode>
        <brief>
          Input file.
        </brief>
        <description>                                   
            Input file to be filled.
        </description>
        <filter>
          *.cub
        </filter>
      </parameter>

      <parameter name="TO">
        <type>cube</type>
        <fileMode>output</fileMode>
        <brief>
          Output file.
        </brief>
        <description>
          Output cube.
        </description>
        <filter>
          *.cub
        </filter>
      </parameter>
    </group>
    <group name="Interpolation Scheme">
      <parameter name="INTERP">
        <type>string</type>
        <default><item>CUBICCONVOLUTION</item></default>
        <brief>Interpolation type to be used on the line and sample transform</brief>
        <description>
            fillgap provides 3 different interpolation options.  The
            interpolation option chosen is used to compute a continuous (or
            piecewise continous) interpolation so that each line and sample
            has a transform location that maps the output line and sample
            to a shifted input line and sample.  These interpolations provide
            this mapping.
        </description>
       <list>
          <option value="LINEAR">
            <brief>Linear Interpolation of line and samples</brief>
            <description>
                The interpolation type used to determine intermediate line and
                sample shifts for each line.  Linear interpolation is piecewise
                discontinuous.  This interpolation option requires a minimum
                2 points.
            </description>
          </option>
          <option value="CUBICCONVOLUTION">
            <brief>Cubic Spline interpolation of each line and sample</brief>
            <description>
                Uses cubic spline with natural boundary conditions for
                interpolation of each line and sample shift.  The resulting
                curve is piecewise cubic on each interval with matching
                first and second derivatives at the supplied data points.
                The second derivative is chosen to be zero at the first
                point and last point.  This interpolation option requires a
                minimum of 3 points.
            </description>
          </option>
          <option value="AKIMA">
            <brief>Akima Spline interpolation of each line and sample</brief>
            <description>
                Uses a non-rounded Akima spline with natural boundary conditions
                for interpolation of each line and sample shift.  This spline uses
                the non-rounded corner algorithm of Wodicka.  It requires a
                minimum of 5 points.
            </description>
          </option>
        </list>
      </parameter>
    </group>

    <group name="Direction">
      <parameter name="DIRECTION">
        <type>string</type>
        <default>
          <item>SAMPLE</item>
        </default>
        <brief>Direction of bad pixels </brief>
        <description>
          This is the direction of the special pixels across the image.  If the special pixels run through the bands of the image data,
          try both directions to see which works best.
        </description>
        <list>
          <option value="Sample">
            <brief>Across samples</brief>
            <description>
              The special pixels run horizontally across the image samples.
            </description>
          </option>
          <option value="Line">
            <brief>Across lines</brief>
            <description>
              The special pixels run vertically across the image lines.
            </description>
          </option>
          <option value="Band">
            <brief>Across Bands</brief>
            <description>
              The special pixels run 3-D through the image bands.
            </description>
          </option>
        </list>
      </parameter>
    </group>
  </groups>
  <examples>
    <example>
      <brief> Peaks image horizontal gaps filled  </brief>
      <description>
        This example shows the fillgap application using the default direction (horizontal) and the default
        interpolation scheme (cubic).
      </description>
      <terminalInterface>
        <commandLine> from=../IN/peaks-h-null.cub to=OUT/output.cub interp=cubic direction=samples
        </commandLine>
        <description>
         fillgap gui example
        </description>
      </terminalInterface>

      <inputImages>
        <image src="assets/image/peaks-horizline.JPG" width="500" height="500">
          <brief> Input image for fillgap</brief>
          <description>This is the input image for the fillgap example with null horizontal line.
          </description>
          <thumbnail caption=" Input Peaks image" src="assets/thumb/peaks-horizline.JPG" width="200" height="200"/>
          <parameterName>FROM</parameterName>
        </image>
      </inputImages>

      <outputImages>
        <image src="assets/image/peaks-fixed.JPG" width="500" height="500">
          <brief> Output image for fillgap</brief>
          <description> This is the output image that results after a cubic interpolation to fill the null data gaps.
          </description>
          <thumbnail caption="Output image showing results of the fillgap application." src="assets/thumb/peaks-fixed.JPG" width="200" height="200"/>
          <parameterName>TO</parameterName>
        </image>
      </outputImages>

      <guiInterfaces>
        <guiInterface>
          <image width="741" height="841" src="assets/image/fillgapGui.JPG">
            <brief>Example Gui</brief>
            <description>Screenshot of GUI with parameters filled in to perform
              a fillgap operation on the input image.
            </description>
            <thumbnail width="200" height="300" caption="Fillgap Gui" src="assets/thumb/fillgapGui.JPG" />
          </image>
        </guiInterface>
      </guiInterfaces>
    </example>
  </examples>
</application>
